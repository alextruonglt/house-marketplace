{"ast":null,"code":"import{useLocation,useNavigate}from'react-router-dom';import{getAuth,signInWithPopup,GoogleAuthProvider}from'firebase/auth';import{doc,setDoc,getDoc,serverTimestamp}from'firebase/firestore';import{db}from'../firebase.config';import{toast}from'react-toastify';import googleIcon from\"../assets/svg/googleIcon.svg\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function OAuth(){const navigate=useNavigate();const location=useLocation();const onGoogleClick=async()=>{try{const auth=getAuth();const provider=new GoogleAuthProvider();const result=await signInWithPopup(auth,provider);const user=result.user;// Check for user\nconst docRef=doc(db,'users',user.uid);const docSnap=await getDoc(docRef);// If user, doesn't exist, create user\nif(!docSnap.exists()){await setDoc(doc(db,'users',user.uid),{name:user.displayName,email:user.email,timestamp:serverTimestamp()});}navigate('/');}catch(error){toast.error('Could not authorize with Google');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"socialLogin\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Sign \",location.pathname==='/sign-up'?'up':'in',\" with \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"socialIconDiv\",onClick:onGoogleClick,children:/*#__PURE__*/_jsx(\"img\",{className:\"socialIconImg\",src:googleIcon,alt:\"google\"})})]});}export default OAuth;","map":{"version":3,"names":["useLocation","useNavigate","getAuth","signInWithPopup","GoogleAuthProvider","doc","setDoc","getDoc","serverTimestamp","db","toast","googleIcon","jsxs","_jsxs","jsx","_jsx","OAuth","navigate","location","onGoogleClick","auth","provider","result","user","docRef","uid","docSnap","exists","name","displayName","email","timestamp","error","className","children","pathname","onClick","src","alt"],"sources":["/Users/alextruong/Documents/Coding/house-marketplace/src/components/OAuth.js"],"sourcesContent":["import { useLocation, useNavigate } from 'react-router-dom'\nimport { getAuth, signInWithPopup, GoogleAuthProvider } from 'firebase/auth'\nimport { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore'\nimport { db } from '../firebase.config'\nimport { toast } from 'react-toastify'\nimport googleIcon from '../assets/svg/googleIcon.svg'\n\nfunction OAuth() {\n  const navigate = useNavigate()\n  const location = useLocation()\n\n  const onGoogleClick = async () => {\n    try {\n      const auth = getAuth()\n      const provider = new GoogleAuthProvider()\n      const result = await signInWithPopup(auth, provider)\n      const user = result.user\n\n      // Check for user\n      const docRef = doc(db, 'users', user.uid)\n      const docSnap = await getDoc(docRef)\n\n      // If user, doesn't exist, create user\n      if (!docSnap.exists()) {\n        await setDoc(doc(db, 'users', user.uid), {\n          name: user.displayName,\n          email: user.email,\n          timestamp: serverTimestamp(),\n        })\n      }\n      navigate('/')\n    } catch (error) {\n      toast.error('Could not authorize with Google')\n    }\n  }\n\n  return (\n    <div className='socialLogin'>\n      <p>Sign {location.pathname === '/sign-up' ? 'up' : 'in'} with </p>\n      <button className='socialIconDiv' onClick={onGoogleClick}>\n        <img className='socialIconImg' src={googleIcon} alt='google' />\n      </button>\n    </div>\n  )\n}\n\nexport default OAuth\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,OAAO,CAAEC,eAAe,CAAEC,kBAAkB,KAAQ,eAAe,CAC5E,OAASC,GAAG,CAAEC,MAAM,CAAEC,MAAM,CAAEC,eAAe,KAAQ,oBAAoB,CACzE,OAASC,EAAE,KAAQ,oBAAoB,CACvC,OAASC,KAAK,KAAQ,gBAAgB,QAAAC,UAAA,2CAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAGtC,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACf,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAmB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,IAAI,CAAGlB,OAAO,CAAC,CAAC,CACtB,KAAM,CAAAmB,QAAQ,CAAG,GAAI,CAAAjB,kBAAkB,CAAC,CAAC,CACzC,KAAM,CAAAkB,MAAM,CAAG,KAAM,CAAAnB,eAAe,CAACiB,IAAI,CAAEC,QAAQ,CAAC,CACpD,KAAM,CAAAE,IAAI,CAAGD,MAAM,CAACC,IAAI,CAExB;AACA,KAAM,CAAAC,MAAM,CAAGnB,GAAG,CAACI,EAAE,CAAE,OAAO,CAAEc,IAAI,CAACE,GAAG,CAAC,CACzC,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAnB,MAAM,CAACiB,MAAM,CAAC,CAEpC;AACA,GAAI,CAACE,OAAO,CAACC,MAAM,CAAC,CAAC,CAAE,CACrB,KAAM,CAAArB,MAAM,CAACD,GAAG,CAACI,EAAE,CAAE,OAAO,CAAEc,IAAI,CAACE,GAAG,CAAC,CAAE,CACvCG,IAAI,CAAEL,IAAI,CAACM,WAAW,CACtBC,KAAK,CAAEP,IAAI,CAACO,KAAK,CACjBC,SAAS,CAAEvB,eAAe,CAAC,CAC7B,CAAC,CAAC,CACJ,CACAS,QAAQ,CAAC,GAAG,CAAC,CACf,CAAE,MAAOe,KAAK,CAAE,CACdtB,KAAK,CAACsB,KAAK,CAAC,iCAAiC,CAAC,CAChD,CACF,CAAC,CAED,mBACEnB,KAAA,QAAKoB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BrB,KAAA,MAAAqB,QAAA,EAAG,OAAK,CAAChB,QAAQ,CAACiB,QAAQ,GAAK,UAAU,CAAG,IAAI,CAAG,IAAI,CAAC,QAAM,EAAG,CAAC,cAClEpB,IAAA,WAAQkB,SAAS,CAAC,eAAe,CAACG,OAAO,CAAEjB,aAAc,CAAAe,QAAA,cACvDnB,IAAA,QAAKkB,SAAS,CAAC,eAAe,CAACI,GAAG,CAAE1B,UAAW,CAAC2B,GAAG,CAAC,QAAQ,CAAE,CAAC,CACzD,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAAtB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}